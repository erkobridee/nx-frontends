# example of how share values between stages using a global var
#
trigger: none

pool:
  vmImage: 'ubuntu-latest'

variables:
  globalVar: 'initial value'

stages:
  - stage: stage_1
    displayName: first
    jobs:
      - job: setGlobalVar
        steps:
          - checkout: none
          - script: echo $(globalVar)
            displayName: echo $(globalVar)
          - script: |
              echo "##vso[task.setvariable variable=globalVar;]'value from the stage 1 job setGlobalVar'"
            displayName: update $(globalVar) value
          - script: echo $(globalVar)
            displayName: updated value

  - stage: stage_2
    displayName: second
    jobs:
      - job: readGlobalVar
        steps:
          - checkout: none
          - script: echo $(globalVar)
            displayName: echo $(globalVar)
