# pipeline suggested name: MANUALLY build frontend-app-1
# for master or develop branch

name: $(SourceBranchName)_$(Date:yyyyMMdd)$(Rev:.r)

trigger: none
pr: none

pool:
  vmImage: 'ubuntu-latest'

variables:
  APP_NAME: 'frontend-app-1'
  ${{ if eq(variables['Build.SourceBranch'], 'refs/heads/master') }}:
    ENV: 'prod'
  ${{ if ne(variables['Build.SourceBranch'], 'refs/heads/master') }}:
    ${{ if eq(variables['Build.SourceBranch'], 'refs/heads/develop') }}:
      ENV: 'dev'
    ${{ if ne(variables['Build.SourceBranch'], 'refs/heads/develop') }}:
      ENV: 'feat'

stages:
  - template: templates/build-one.yml
    parameters:
      appName: $(APP_NAME)
